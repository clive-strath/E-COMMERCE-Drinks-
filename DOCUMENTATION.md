# E-Commerce Drinks Application

A comprehensive Laravel-based e-commerce platform for selling beverages with features including product management, wishlist, order management, ratings, and a full-featured admin panel.

## Table of Contents
- [Features](#features)
- [Tech Stack](#tech-stack)
- [Requirements](#requirements)
- [Local Setup](#local-setup)
- [Configuration](#configuration)
- [Database Setup](#database-setup)
- [Running the Application](#running-the-application)
- [Default Admin Access](#default-admin-access)
- [Deployment](#deployment)
- [Testing](#testing)
- [Project Structure](#project-structure)

## Features

### Customer Features
- **Product Browsing**: Browse products by category with search functionality
- **Wishlist**: Save favorite products for later
- **Shopping Cart**: Add products to cart and manage quantities
- **Quick Checkout**: "Buy Now" for instant single-product orders
- **Order Tracking**: View order history and status
- **Order Rating**: Rate delivered orders with 1-5 stars and comments
- **Product Reviews**: View related products
- **User Account**: Registration, login, and profile management

### Admin Features
- **Product Management**: Create, edit, and delete products with AI image generation support
- **Category Management**: Create categories and assign products
- **Order Management**: View all orders, order details, and update order status
- **Mark as Delivered**: Update order status and automatically mark payment as paid
- **View Customer Ratings**: See customer ratings and feedback on orders
- **Dashboard**: Quick overview of orders, revenue, and key metrics
- **User Notifications**: Customers receive notifications when orders are delivered

## Tech Stack

- **Backend**: Laravel 11.x (PHP 8.2+)
- **Frontend**: Blade Templates, Tailwind CSS, Alpine.js
- **Database**: MySQL/MariaDB
- **Authentication**: Laravel Breeze
- **Asset Bundling**: Vite
- **Testing**: PHPUnit

## Requirements

- PHP >= 8.2
- Composer
- Node.js >= 18.x & npm
- MySQL >= 8.0 or MariaDB >= 10.3
- Git

## Local Setup

### 1. Clone the Repository

```bash
git clone <repository-url>
cd E-COMMERCE-Drinks-/laravel
```

### 2. Install PHP Dependencies

```bash
composer install
```

### 3. Install Node Dependencies

```bash
npm install
```

### 4. Environment Configuration

```bash
# Copy the example environment file
cp .env.example .env

# Generate application key
php artisan key:generate
```

### 5. Configure Environment Variables

Edit the `.env` file with your database credentials:

```env
APP_NAME="Drinks Shop"
APP_ENV=local
APP_KEY=base64:... # Generated by php artisan key:generate
APP_DEBUG=true
APP_URL=http://localhost:8000

DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=drinks_ecommerce
DB_USERNAME=root
DB_PASSWORD=your_password

# Optional: Mail configuration for notifications
MAIL_MAILER=smtp
MAIL_HOST=mailhog
MAIL_PORT=1025
MAIL_USERNAME=null
MAIL_PASSWORD=null
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS="hello@example.com"
MAIL_FROM_NAME="${APP_NAME}"
```

## Database Setup

### 1. Create Database

```bash
# MySQL/MariaDB
mysql -u root -p
CREATE DATABASE drinks_ecommerce CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
exit;
```

### 2. Run Migrations

```bash
php artisan migrate
```

### 3. Seed Database (Optional but Recommended)

```bash
# Seed with sample products, categories, and admin user
php artisan db:seed
```

**Default Admin Credentials** (if seeded):
- Email: `admin@example.com`
- Password: `password`

### 4. Create Storage Link

```bash
php artisan storage:link
```

This creates a symbolic link from `public/storage` to `storage/app/public` for serving uploaded files.

## Running the Application

### Development Server

```bash
# Terminal 1: Start Laravel development server
php artisan serve


```

Visit: `http://localhost:8000`

### Build for Production

```bash
npm run build
```

## Default Admin Access

After running the database seeder, you can access the admin panel:

- **URL**: `http://localhost:8000/admin/dashboard`
- **Email**: `admin@example.com`
- **Password**: `password`

**⚠️ IMPORTANT**: Change the admin password immediately after first login!

## Deployment

### Option 1: Traditional VPS/Server Deployment

#### Prerequisites
- Ubuntu 20.04+ or similar Linux distribution
- LAMP/LEMP stack (Apache/Nginx, MySQL, PHP)
- Composer installed globally
- Node.js and npm installed

#### Deployment Steps

1. **Clone Repository on Server**
   ```bash
   cd /var/www
   git clone <repository-url> drinks-shop
   cd drinks-shop/laravel
   ```

2. **Install Dependencies**
   ```bash
   composer install --optimize-autoloader --no-dev
   npm install
   npm run build
   ```

3. **Configure Environment**
   ```bash
   cp .env.example .env
   nano .env  # Edit with production values
   ```

   **Important `.env` Changes for Production**:
   ```env
   APP_ENV=production
   APP_DEBUG=false
   APP_URL=https://yourdomain.com
   
   DB_CONNECTION=mysql
   DB_HOST=127.0.0.1
   DB_DATABASE=your_production_db
   DB_USERNAME=your_db_user
   DB_PASSWORD=strong_password_here
   ```

4. **Set Application Key**
   ```bash
   php artisan key:generate
   ```

5. **Run Migrations**
   ```bash
   php artisan migrate --force
   php artisan db:seed --force  # If you want sample data
   ```

6. **Set Permissions**
   ```bash
   sudo chown -R www-data:www-data /var/www/drinks-shop/laravel
   sudo chmod -R 755 /var/www/drinks-shop/laravel
   sudo chmod -R 775 /var/www/drinks-shop/laravel/storage
   sudo chmod -R 775 /var/www/drinks-shop/laravel/bootstrap/cache
   ```

7. **Create Storage Link**
   ```bash
   php artisan storage:link
   ```

8. **Optimize Laravel**
   ```bash
   php artisan config:cache
   php artisan route:cache
   php artisan view:cache
   ```

9. **Configure Web Server**

   **Nginx Example** (`/etc/nginx/sites-available/drinks-shop`):
   ```nginx
   server {
       listen 80;
       server_name yourdomain.com www.yourdomain.com;
       root /var/www/drinks-shop/laravel/public;
       
       add_header X-Frame-Options "SAMEORIGIN";
       add_header X-Content-Type-Options "nosniff";
       
       index index.php;
       
       charset utf-8;
       
       location / {
           try_files $uri $uri/ /index.php?$query_string;
       }
       
       location = /favicon.ico { access_log off; log_not_found off; }
       location = /robots.txt  { access_log off; log_not_found off; }
       
       error_page 404 /index.php;
       
       location ~ \.php$ {
           fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
           fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
           include fastcgi_params;
       }
       
       location ~ /\.(?!well-known).* {
           deny all;
       }
   }
   ```

   Enable site and restart Nginx:
   ```bash
   sudo ln -s /etc/nginx/sites-available/drinks-shop /etc/nginx/sites-enabled/
   sudo nginx -t
   sudo systemctl restart nginx
   ```

10. **Setup SSL (Recommended)**
    ```bash
    sudo apt install certbot python3-certbot-nginx
    sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
    ```

### Option 2: Laravel Forge (Recommended for Ease)

1. Sign up for [Laravel Forge](https://forge.laravel.com)
2. Connect your server provider (DigitalOcean, AWS, etc.)
3. Create a new site and point it to your repository
4. Configure environment variables in Forge dashboard
5. Enable Quick Deploy for automatic deployments

### Option 3: Shared Hosting

1. Build assets locally: `npm run build`
2. Upload all files to `public_html` or equivalent
3. Move all files except `public` folder contents to a directory above `public_html`
4. Move contents of `public` folder to `public_html`
5. Update `public_html/index.php` to point to correct paths
6. Create `.env` file with production settings
7. Run migrations via SSH or hosting control panel

## Testing

### Run All Tests
```bash
php artisan test
```

### Run Specific Test Suite
```bash
php artisan test --testsuite=Feature
php artisan test --filter=WishlistTest
```

### Test Coverage
```bash
php artisan test --coverage
```

## Project Structure

```
laravel/
├── app/
│   ├── Http/
│   │   └── Controllers/
│   │       ├── Admin/        # Admin panel controllers
│   │       ├── CartController.php
│   │       ├── CheckoutController.php
│   │       ├── ProductController.php
│   │       └── WishlistController.php
│   ├── Models/              # Eloquent models
│   └── Notifications/       # User notifications
├── database/
│   ├── migrations/          # Database migrations
│   ├── seeders/            # Database seeders
│   └── factories/          # Model factories for testing
├── resources/
│   ├── views/
│   │   ├── admin/          # Admin panel views
│   │   ├── products/       # Product views
│   │   ├── orders/         # Order views
│   │   └── wishlist/       # Wishlist views
│   └── css/
├── routes/
│   └── web.php             # Web routes
├── storage/
│   └── app/
│       └── public/
│           └── products/    # Product images
├── tests/
│   └── Feature/            # Feature tests
└── public/                 # Public assets
```

## Key Files to Configure

- `.env` - Environment variables
- `config/app.php` - Application configuration
- `config/database.php` - Database configuration
- `routes/web.php` - Application routes
- `database/seeders/DatabaseSeeder.php` - Database seeding

## Common Issues & Troubleshooting

### Issue: "App key not found"
**Solution**: Run `php artisan key:generate`

### Issue: Storage link not working
**Solution**: Run `php artisan storage:link`

### Issue: Permission denied errors
**Solution**: 
```bash
sudo chmod -R 775 storage bootstrap/cache
```

### Issue: Vite manifest not found
**Solution**: Run `npm run build`

### Issue: Database connection error
**Solution**: Check `.env` database credentials and ensure MySQL service is running

### Issue: Routes not working (404 errors)
**Solution**: 
```bash
php artisan route:clear
php artisan config:clear
php artisan cache:clear
```

## Updating the Application

```bash
git pull origin main
composer install --no-dev
npm install && npm run build
php artisan migrate --force
php artisan config:cache
php artisan route:cache
php artisan view:cache
```

## Security Notes

1. **Change default admin password** immediately in production
2. Never commit `.env` file to version control
3. Set `APP_DEBUG=false` in production
4. Use strong database passwords
5. Keep dependencies updated: `composer update` and `npm update`
6. Enable HTTPS with SSL certificate
7. Regular backups of database and uploaded files

## Support & Documentation

- [Laravel Documentation](https://laravel.com/docs)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)
- [Vite Documentation](https://vitejs.dev)

## License

This project is proprietary software. All rights reserved.
